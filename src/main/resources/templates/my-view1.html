<link href="../static/bower_components/polymer/polymer.html" />
<link href="../static/bower_components/google-map/google-map.html" />
<link href="my-icons.html" />
<link href = "../static/css/main.css" />
<link href="shared-styles.html" />
<dom-module id="my-view1">
  <iron-ajax
          auto
          id='ajaxId'
          url = "http://localhost:8080/point/getElevation"
          method="GET"
          handle-as="text"
          on-response="handleResponse">
  </iron-ajax>

  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 10px;
      }
      #mapid{
        display:block;
        height:90vh;
      }

    </style>
    <div id="wrapper">
    <div id="mapid">
    <google-map id="map" click-events="true"  on-click="fg" map="{{map}}" api-key="AIzaSyDbDxZvaQJ5QPYwhWSXn0WWKIxIhhMfups">
    </google-map>
    </div>
    <div id="over_map">
      ghfhfhfkgfk
    </div>
    </div>

  </template>
  <script>

    Polymer({
      is: 'my-view1',

      properties:{
          contents : String,
        map : {
          type : Object
        }
      },

      fg: function() {
          var fk = this.contents;
        var iwindow = new google.maps.InfoWindow();
        google.maps.event.addListener(this.map, 'click', function(e) {
          var latitude = e.latLng.lat();
          var longitude = e.latLng.lng();
          //console.log(e.latLng.lat() + ", " + e.latLng.lat());
          var uluru = {lat: latitude, lng: longitude};
          iwindow.setContent("hulala");
          iwindow.setPosition(uluru);
          iwindow.open(this.map);
        }.bind(this));   
      },

      /*clickf: function (event) {
            var longitude = event.target.longitude;
            var latitude = event.target.latitude;
            var iwindow = new google.maps.InfoWindow({
              content: latitude+", "+longitude
              });
            iwindow.setPosition({lat : latitude, lng : longitude});
            iwindow.open(this.map);

            console.log(this.map);
      },*/
        handleResponse: function(data){
            this.contents = data.detail.response;

        }

    });

  </script>
</dom-module>